<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>知情同意书系统</title>
    <link rel="stylesheet" href="styles.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
</head>
<body>
    <!-- 主页面 -->
    <div id="main-page" class="page active">
        <div class="main-container">
            <h1>知情同意书系统</h1>
            <p class="subtitle">请选择您需要签署的同意书类型</p>
            
            <div class="button-container">
                <button class="consent-btn" onclick="showConsentPage('counseling')">
                    咨询知情同意
                </button>
                <button class="consent-btn" onclick="showConsentPage('recording')">
                    录音录像知情同意
                </button>
            </div>
        </div>
    </div>

    <!-- 同意书页面 -->
    <div id="consent-page" class="page">
        <div class="consent-container">
            <div class="header">
                <button class="back-btn" onclick="showMainPage()">← 返回</button>
                <h2 id="consent-title"></h2>
            </div>
            
            <div class="content-container">
                <!-- 咨询知情同意书 -->
                <div id="counseling-content" class="consent-content">
                    <h3>心理咨询知情同意书</h3>
                    <p>您好！以下是关于心理咨询的基本情况介绍：</p>
                    <p>1.    您和咨询师是双方自愿选择，您需要为所接受的心理咨询服务付费。当前咨询费是您签订协议时的咨询定价（300元/次），随后每个自然年咨询费用存在上调的可能（上调时间和幅度咨询师会至少提前1个月与您沟通）。每次咨询后24小时内付费，微信或支付宝转账均可。</p>
                    <p>2.    咨询时间的长短以及频率：心理咨询包括定期访谈，个人心理咨询每次45至50分钟。至于间隔时间和频率，则视您的问题和个人需要而定，一般是一周 1~3 次。</p>
                    <p>3.    保密性：对于您向咨询师提供的信息和咨询过程中的内容，咨询师绝对严格保密，没有您的书面同意，咨询师不能泄露出去。然而，根据法律规定，当您自己或他人生命受到威胁，或孩子有危险（如性虐待、体罚或忽视）时，咨询师无法绝对保密。如果咨询师需要与同事讨论对您实施的咨询进行学术研究及教学，咨询师会尽力隐瞒有关您的身份及信息，包括使用化名。</p>
                    <p>4.    <strong>预约和取消：如果您需要取消或更改预约，请提前 24 小时告知，否则会向您收取咨询费。同样，若咨询师不能如约前来咨询，咨询师也需提前 24 小时通知您，否则给您免费补一次咨询时段。</strong></p>
                    <p>5.    <strong><u>您约定的时间就是您的心理咨询时间，请您按预约时间准时到达咨询室或上线。若您迟到，咨询师将不相应延长咨询时间，费用按照原约定时段收费。</u></strong></p>
                    <p>6. 休假：如无特殊原因，全国法定节假日均休息，另外每年会有1-2次集中休假时间，时长在1-2周，会提前一个月左右通知来访。</p>
                    <p>7.    咨询师只针对心理咨询范围工作：如减缓不良情绪；学习人际互动；提高自洽等咨询内容。咨询师对咨询过程负责，不对咨询结果负责。<u>如果您同时接受精神卫生机构的药物治疗，请严格按照医嘱正规服药，不得擅自停药或减药，不规范服药的危害请咨询您的主诊医生；同时，需在进行心理咨询前到接受药物治疗的精神卫生机构进行是否适合进行心理咨询的评估诊断。</u></p>
                    <p>8.   在咨询过程中，如果发现您的问题是由于器质性病变引起的，或是您的问题需要医学治疗的帮助，我们会建议您到精神卫生机构或政府综合医院做诊断，在精神卫生机构或政府综合医院接受药物或心理治疗。</p>
                    <p>9.    心理咨询机构及咨询师，只承担对自杀、精神分裂、抑郁症等危险症状对家属的告知义务，不承担来访者自杀及其他责任，对由于来访者及家人隐瞒诊断和症状造成的后果，不承担责任。</p>
                    <p>10.   自由退出：您有权利在任何时间终止咨询，结束咨询往往也有个人潜意识的动力驱使，最好可以有充足时间讨论结束。</p>
                    <p>签字同意：我已阅读并理解且同意以上条款。</p>
                    <p>&nbsp;</p>
                    <p>&nbsp;</p>
                    <p>来访者：                                    咨询师：</p>
                    <p>年     月      日                           年     月     日</p>
                </div>
                
                <!-- 录音录像知情同意书 -->
                <div id="recording-content" class="consent-content">
                    <h3>心理咨询录音、录像知情同意书</h3>
                    <p>为保证我得到更好的服务，并为我的心理咨询师提供反馈，我_______（当事人姓名）允许对我与我的心理咨询师李洋的会谈进行录音或录像。</p>
                    <p><strong>我知晓只有我的心理咨询师和她的督导师会听到/看到这份录音/录像，在督导之后，这份录音/录像将会被删除。</strong>会谈录音/录像不会对我获得的服务产生不良影响。</p>
                    <p>&nbsp;</p>
                    <p>&nbsp;</p>
                    <p>来访者：                              咨询师：</p>
                    <p>&nbsp;</p>
                    <p>年     月      日                        年     月     日</p>
                </div>
            </div>
            
            <div class="signature-section">
                <h4>签名确认</h4>
                
                <div class="signature-container">
                    <div class="signature-item">
                        <label>来访签名</label>
                        <canvas id="client-signature" class="signature-canvas"></canvas>
                        <div class="signature-controls">
                            <button class="control-btn" onclick="clearSignature('client')">清除</button>
                        </div>
                    </div>
                    
                    <div class="signature-item">
                        <label>咨询师签名</label>
                        <canvas id="counselor-signature" class="signature-canvas"></canvas>
                        <div class="signature-controls">
                            <button class="control-btn" onclick="clearSignature('counselor')">清除</button>
                        </div>
                    </div>
                </div>
                
                <button class="preview-btn" onclick="showPreviewPage()" style="position: fixed !important; bottom: 20px !important; left: 50% !important; transform: translateX(-50%) !important; width: calc(100% - 28px) !important; max-width: 300px !important; padding: 14px !important; font-size: 0.9rem !important; margin: 0 !important; min-height: 50px !important; z-index: 9999 !important; box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2) !important; background: linear-gradient(135deg, #27ae60, #229954) !important; color: white !important; font-weight: 600 !important; border: none !important; border-radius: 8px !important; cursor: pointer !important; text-align: center !important; display: block !important;">预览并导出</button>
            </div>
        </div>
    </div>

    <!-- 预览页面 -->
    <div id="preview-page" class="page">
        <div class="preview-container">
            <div class="header">
                <button class="back-btn" onclick="showConsentPage(currentConsentType)">← 返回</button>
                <h2>预览与导出</h2>
            </div>
            
            <div class="preview-content" id="preview-content">
                <!-- 预览内容将通过JavaScript动态生成 -->
            </div>
            
            <div class="export-controls">
                <button class="export-btn" onclick="exportAsImage()">导出为图片</button>
                <button class="export-btn" onclick="exportAsPDF()">导出为PDF</button>
                <button class="export-btn home-btn" onclick="showMainPage()">返回首页</button>
            </div>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>